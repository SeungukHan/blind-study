# 11장 12장

## 11장 프로토타입과 프스트 잇

- 다양한 분야에서 프로토타입을 이용하여 보다 구체적인 아이디어를 끌어내려 시도함
    - 비용을 획기적으로 줄일 수 있고, 위험 요소나 불확실한 요소를 실제 제품을 만들어 보지 않고도 제거할 수 있음
- 소프트웨어 프로토타입도 마찬가지
    - 위험 요소를 분석하고 노출시켜 저렴한 비용으로 바로 잡을 기회를 얻음
- 프로토타입을 굳이 코드로 짤 필요는 없음
    - 포스트잇은 작업 흐름과 애플리케이션 로직과 같은 동적인 것들을 프로토타이핑 해볼수 있는 좋은도구
    - 화이트 보드 / 페인트 프로그램 / 인터페이스 빌더 등을 이용해도 됨

### 프로토타입 대상

- 대상은 위험을 수반하는 모든 것
- 이전에 해본적이 없는 것
- 최종 시스템에 매우 중요한 것
- 증명되지 않은 것
- 실험적인 것
- 의심이 가는 것
- 심적으로 편하지 않는 것

프로토타이핑의 가치는 생성된 코드에 있는 것이 아니라 이를 통해 배우는 교훈에 있음 

### 프로토타입을 어떻게 사용할 것인가?

프로토타이핑 시 무시해도 좋은 세부사항 

- 정확성
    - 적절히 가짜 데이터 사용해도됨
- 완전성
    - 미리 선정한 입력 데이터와 한 가지 메뉴 항목에서만 동작하면 됨
- 안정성
    - 미리 정의된 방법대로 실행시키지 않으면 와장창 망가져도 됨
- 스타일
    - 주석이나 문서를 많이 만들지 않아도 됨
    - 프로토타입의 결과로 문서를 많이 만들어낼 수 있지만 프로토타입 자체에는 많은 문서를 만들 필요는 없음

프로토타입은 세부사항을 생략하고 시스템의 특정 측면에 초점을 맞추므로 프로젝트를 진행하는 언어보다 고수준 언어로 구현가능 

- 펄, 파이썬 혹은 Td

### 아키텍처 프로토타이핑

- 코드를 작성하지 않고 화이트보드, 포스트잇, 인덱스 카드 등을 사용해도 됨
- 전체적으로 시스템이 어떻게 동작할지에 대한 감을 잡기 위함이며 세부사항은 무시함
- 아키텍처 프로토타이핑에서 규명할만한 사항들
    - 주요 컴포넌트의 책임이 잘 정의되었고 적절한가?
    - 주요 컴포넌트 간의 협력관계가 잘 정의되어있는가?
    - 결합도는 최소화되었는가?
    - 잠재적 중복을 찾아낼 수 있는가?
    - 인터페이스 정의와 제약 사항은 수용할만한가?
    - 각 모듈이 실행 중에 필요로 하는 데이터에 접근할 수 있는 경로를 갖고 있는가? 모듈은 데이터를 필요로 할 때 데이터에 접근할 수 있는가? → 가장 놀랍고도 값진 결과를 내놓기 쉬움

### 어떻게 프로토타입을 사용하지 않을 것인가?

- 모든 사람들에게 폐기처분할 코드를 작성하고 있다는 사실을 이해시켜야 함
    - 프로토타입은 그것이 프로토타입을 모르는 사람들에게 매우 매력적일 수 있기 때문
    - 코드는 폐기될 것이고 불완전하며 완성할 수 없다는 사실을 분명하게 주지시켜야 함
- 작업하는 환경이나 문화에서 프로토타입 코드의 목적이 잘못 해석될 가능성이 크다면 예광탄 접근 방식이 나음

## 12장 도메인 언어

컴퓨터 언어는 문제에 대해 생각하는 방식과 의사소통에 대해서 생각하는 방식에 영향을 미침

- 언어에는 언어의 특징들의 목록이 딸려옴
    - 정적 타입 대 동적 타입
    - 이른 바인딩 대 늦은 바인딩
    - 상속 모델
- 이러한 용어는 어떤 해결 방안들을 제시할 수도 있지만 가려버릭기도 함

어플리케이션 도메인의 어휘를 사용해서 코드를 작성하려고 노력 함

- 더 나아가 실제로 그 도메인의 어휘, 문법, 의미론을 사용하여 프로그래밍하는 일이 가능할 때도 있음

예제)

일련의 X.25 선에 ABC 규칙 12.3에 정의된 트랜잭션에 귀 기울이고 있다가, 트랜잭션이 오면 XYZ 회사의 43B 형식으로 바꾼 뒤, 그것을 위성통신을 이용해 다시 전송하고 추후 분석용으로 저장해 둡니다. 

- 사용자들이 정리가 잘 된 진술을 해주면, 원하는 내용을 정확히 표현하는 어플리케이션 도메인에 맞춰진 소형언어를 만들 수 있음

```java
From X25LINE1 (Format=ABC123) {
  Put TELSTAR1 (Format=XYZ43B);
  Store DB;
}
```

이러한 소형언어가 꼭 실행될 필요는 없고, 단지 처음에 사용자의 요구사항을 잡아내는 한 가지 방법, 즉 명세로 사용해도 됨

어플리케이션 작성 후, 사용자가 잔고가 음수인 트랜잭션은 저장되면 안 되며 X.25 선을 통해 원래 형식대로 다시 돌려보내야 한다는 요구사항을 새로 전달함

```java
From X25LINE1 (Format=ABC123) {
  if (ABC123.balance < 0) {
    Put X25LINE1 (Format=ABC123);
  }
  else {
    Put TELSTAR1 (Format=XYZ43B);
    Store DB;
  }
}
```

문제 도메인에 가깝게 프로그래밍 하라

- 프로젝트를 문제 도메인에 가까운곳으로 옮길 방법들을 궁리해보라
- 더 높은 추상화 수준에서 작업함으로써 사소한 구현의 세부사항들을 무시하고 도메인의 문제들을 푸는 일에만 정신을 집중할 수 있음

### 소형 언어를 구현하기

- 간단한 구현방법 : 파싱하기 쉬운 라인 중심 형식의 언어로 만드는 것
    - 라인 중심 언어는 단순한 switch 구문을 쓰거나 perl과 같은 스크립트로 정규표현식을 이용해 파싱 가능
- 더 엄밀한 문법을 지닌 복잡한 언어를 구현할 수도 있음
    - BNF와 같은 표기법을 사용하여 문법을 먼저 정의하는 것
- 문법이 정의된 후라면 파서 생성기의 입력 형식에 맞게 바꾸는 일은 사소한 일임
    - C / C++ : yacc
    - Java : javaCC
- 소형 언어를 구현하는 다른 방법은 기존의 것을 확장하는 것
    - 어플리케이션 차원의 기능을 파이썬에 통합시킨 후 다음과 비슷한 코드를 작성할 수 있음

    ```java
    record = X24LINE1.get(format=ABC123)
    if (record.balance < 0):
      X25LINE1.put(record, format=ABC123)
    else:
      TELSTAR1.put(record, format=XYZ43B)
      DB.store
    ```

### 데이터 언어와 명령형 언어

데이터언어 : 어플리케이션이 사용할 어떤 형식의 데이터 구조 (환경 설정 정보 표현)

- 예 : sendmail의 경우 자체 환경설정 언어로 쓰인 천 줄 짜리 환경 설정 파일을 통해 제어됨
- 예 : 마이크로소프트는 메뉴, 위젯, 대화상자, 기타 윈도우 자원들을 기술할 수 있는 데이터 언어를 사용해옴

명령형언어 : 실제로 실행되며 문장, 제어 구조체 등을 가질 수 있음

- 프로그램의 유지보수를 쉽게 하기 위해서도 스스로 명령형 언어를 만들어 사용할 수 있음
- 예 : 레거시 어플리케이션에서 출력되는 정보를 새로운 GUI 개발에 통합해 달라는 요청을 받았을 때, 이것을 할 수 있는 일반적인 방법 가운데 하나는 화면 긁어오기임. 작성할 애플리케이션은 메인 프레임 애플리케이션에 마치 일반적인 인간 사용자인 것 처럼 연결해서, 키보드 입력을 발생시키고 돌아온 결과들을 읽을 수 있으며 이런 상호작용을 소형언어를 사용하여 스크립트로 만들 수 있음
- 이러한 종류의 스크립팅을 지원하는 도구는 expect

### 독립 언어와 내장 언어

- 반드시 앱에 직접 사용되어야 소형 언어가 유용한 것은 아님.
- 많은 경우 컴파일 하거나, 읽어들이거나, 그렇지 않은 경우 프로그램 자체가 사용하기 위한 산출물을 만들기 위해 명세 언어를 사용하기도 함 (idl 등을 말하는거겠지?)
- 예) 스키마 명세를 통한 sql, c, xml을 생성하고 앱이 이것을 사용

### 쉬운 개발 아니면 쉬운 유지보수?

복잡한 문법을 구현하는 것은 노력이 더 필요한 일인데, 선택하는 이유는?

- 복잡한 문법에 대한 트레이드 오프 대상은 확장 가능성과 유지보수
- 진짜 언어를 파싱하는 코드는 작성하기 어렵지만 사람들이 그 언어를 이해하기 훨씬 쉽고, 나중에 새로운 특징이나 기능을 추가하여 확장하기도 쉬움
- 너무 간단한 언어는 파싱하기 쉬울지라도 sendmail의 환경설정 파일과 같이 가독성이 좋지 않을 가능성이 있음

대부분의 애플리케이션이 예상 수명보다 더 오래간다는 사실을 비추어볼 때 현재의 고통을 참고 복잡하지만 가독성 좋은 언어를 채택하는 것이 좋을 것임